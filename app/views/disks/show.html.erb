<p style="color: green"><%= notice %></p>

<h1 class="container">Detalles del disco</h1>
<br>

<div id="disk-details-" class="container">
  <article style="background-color: #f9efdb; padding: 2rem;">

    <h4 class="container"><%= @disk.title %></h4>

    <!-- Grid de 2 columnas: datos a la izquierda, imagen a la derecha -->
    <div class="grid">

      <!-- Columna 1: Datos del disco -->
      <div>
        <table class="table-invisible">

        <hr style="border-color: #b92621; border-top: 3px solid #b92621;">

        <thead>
        </thead>

            <tbody>
                <tr>
                        <td class="tg-0lax">
                        <span style="color: #1343a0;">‚Ä¢ </span> Artista
                        </td>
                        <td class="tg-0lax"><%= @disk.artist %></td>
                </tr>

                <tr>
                        <td class="tg-0lax">
                        <span style="color: #1343a0;">‚Ä¢ </span> A√±o
                        </td>
                        <td class="tg-0lax"><%= @disk.year %></td>
                </tr>

                <tr>
                        <td class="tg-0lax">
                        <span style="color: #1343a0;">‚Ä¢ </span> G√©neros
                        </td>
                        <td class="tg-0lax">
                            <% @disk.genres.each do |genre| %>
                            <span style="color: #1343a0;">‚Ä¢ </span><%= genre.genre_name %><br>
                            <% end %>
                        </td>
                </tr>

                <tr>
                        <td class="tg-0lax">
                        <span style="color: #1343a0;">‚Ä¢ </span> Estado
                        </td>
                        <td class="tg-0lax"><%= @disk.state %></td>
                </tr>

                <tr>
                        <td class="tg-0lax">
                        <span style="color: #1343a0;">‚Ä¢ </span> Formato
                        </td>
                        <td class="tg-0lax"><%= @disk.format %></td>
                </tr>

                <tr>
                  <td class="tg-0lax">
                  <span style="color: #1343a0;">‚Ä¢ </span> Stock
                  </td>
                  <td class="tg-0lax">  <%= @disk.stock %> disponibles</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td class="tg-0lax">
                      <br>
                    <span style="color: #1343a0;">‚Ä¢ </span> <%= number_to_currency(@disk.price, :locale => :es) %>
                    </td>
                </tr>
            </tfoot>
        </table>
      </div>

      <!-- Columna 2: Portada del disco -->
       <div style="display: flex; justify-content: center; align-items: center;">
         <% if @disk.cover.attached? %>
          <%= image_tag @disk.cover,
                 style: "width: 400px; height: 400px; border-radius: 8px; box-shadow: 0 8px 16px rgba(0,0,0,0.1);" %>
         <% else %>
           <div class="pico-background-red-100" style="width: 400px; height: 400px; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
             <span style="color: #b92621;">Sin portada</span>
           </div>
         <% end %>

       </div>


    </div>

* muestra de audio si tiene
<!-- app/views/disks/show.html.erb -->
<% if @disk.state == "Usado" && @disk.audio_sample.attached? %>
  <div class="audio-section" style=" background-color: #f9efdb; padding: 1.5rem; border-radius: 12px; margin: 2rem 0; border: 2px solid #1343a0;">
    <h3 style="color: #1343a0; margin-bottom: 1rem;">
      üéµ Escuchar muestra de audio
    </h3>
    <div style=" background-color: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
      <!-- Informaci√≥n del audio -->
      <div style=" display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid #e6e6e6;">
        <div>
          <strong style="color: #1343a0;">
            <%= @disk.audio_sample.filename %>
          </strong><br>
          <small style="color: #666;">
            <%= number_to_human_size(@disk.audio_sample.byte_size) %> ‚Ä¢
            <%= @disk.audio_sample.content_type.split('/').last.upcase %>
          </small>
        </div>
        <div style="text-align: right;">
          <small style=" background-color: #1343a0; color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-weight: bold;">
            USADO
          </small>
        </div>
      </div>
      <!-- Reproductor de audio -->
      <audio controls style=" width: 100%; height: 50px; margin: 1rem 0;">
        <source src="<%= rails_blob_url(@disk.audio_sample) %>"
                type="<%= @disk.audio_sample.content_type %>">
        Tu navegador no soporta el elemento de audio.
      </audio>
      <!-- Controles adicionales -->
      <div style=" display: flex; gap: 1rem; margin-top: 1rem; justify-content: center;">
        <button type="button"
                onclick="document.querySelector('audio').play()"
                style=" background-color: #1343a0; color: white; border: none; padding: 0.5rem 1.5rem; border-radius: 6px; cursor: pointer; font-family: monospace;">
          ‚ñ∂ Reproducir
        </button>
        <button type="button"
                onclick="document.querySelector('audio').pause()"
                style=" background-color: #b92621; color: white; border: none; padding: 0.5rem 1.5rem; border-radius: 6px; cursor: pointer; font-family: monospace;">
          ‚è∏ Pausar
        </button>

        <%= link_to "Descargar audio",
              rails_blob_path(@disk.audio_sample, disposition: "attachment"),
              style: " background-color: #f9efdb; color: #1343a0; border: 2px solid #1343a0; padding: 0.5rem 1.5rem; border-radius: 6px; text-decoration: none; font-family: monospace; display: inline-flex; align-items: center; gap: 0.5rem;"
        %>
      </div>
    </div>
  </div>
<% elsif @disk.state == "Usado" %>
  <div class="no-audio-message" style="
    background-color: #f9efdb;
    padding: 1rem;
    border-radius: 8px;
    margin: 1rem 0;
    border: 2px dashed #b92621;
    text-align: center;
  ">
    <p style="color: #b92621; margin: 0;">
      Este disco no tiene muestra de audio disponible.
    </p>
  </div>
<% end %>

    <!-- Descripci√≥n del disco -->
    <div style="margin-top: 1rem; padding: 1rem; background-color: #fff; border-radius: 8px;">
      <h5 style="color: #1343a0;">Descripci√≥n</h5>
      <p><%= @disk.description %></p>
    </div>

<br>
    <details name="imagenes" closed>
      <summary style="color: #1343a0; font-size: 24px;"><strong>‚ñø Im√°genes</strong></summary>
          <div id="disks-responsive-images" class="container">
            <div class="disks-grid" style="display: flex;flex-wrap: nowrap;justify-content: flex-start; gap: 2rem;">
                  <div style="display: flex; justify-content: center; align-items: left;">
                    <% if @disk.cover.attached? %>
                        <%= link_to image_tag(@disk.cover,
                                class: "disk-tile",
                                style: "width: 200px; height: 200px; border-radius: 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"),
                            disk_path(@disk),
                            class: "disk-link",
                            data: { tooltip: "#{@disk.title} - #{@disk.artist}", placement: "bottom" }
                             %>
                    <% else %>
                      <div class="pico-background-red-100" style="width: 200px; height: 200px; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                        <span style="color: #b92621;">Sin portada</span>
                      </div>
                    <% end %>
                    <% if @disk.images.attached? %>
                      <% @disk.images.each do |image| %>
                        <%= image_tag image,
                               style: "width: 400px; height: 400px; border-radius: 8px; box-shadow: 0 8px 16px rgba(0,0,0,0.1);" %>
                      <% end %>
                    <% end %>
                  </div>
            </div>
          </div>
        <br>
    </details>

    <br>
    <details name="recomendaciones" closed>
      <summary style="color: #1343a0; font-size: 24px;"><strong>‚ñø Discos relacionados</strong></summary>
          <div id="disks-responsive" class="container">
            <div class="disks-grid" style="display: flex;flex-wrap: nowrap;justify-content: flex-start; gap: 2rem;">
              <% @recommended_disks.each do |disk| %>
                  <div style="display: flex; justify-content: center; align-items: left;">
                    <% if disk.cover.attached? %>
                        <%= link_to image_tag(disk.cover,
                                class: "disk-tile",
                                style: "width: 200px; height: 200px; border-radius: 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"),
                            disk_path(disk),
                            class: "disk-link",
                            data: { tooltip: "#{disk.title} - #{disk.artist}", placement: "bottom" }
                             %>
                    <% else %>
                      <div class="pico-background-red-100" style="width: 200px; height: 200px; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                        <span style="color: #b92621;">Sin portada</span>
                      </div>
                    <% end %>
                    <!--
                    <div class="disk-content">
                      <% disk.genres.each do |genre| %>
                          <span style="color: #1343a0;">‚Ä¢ </span><%# genre.genre_name %><br>
                      <% end %>
                    </div>
                    -->
                  </div>
              <% end %>
            </div>
          </div>
        <br>
    </details>

    <hr>

 </article>
</div>

<br>
<div>
  <p class="container">
    <%= link_to "<< Volver", disks_path, style: "color: #1343a0; font-family: monospace; font-size: 18px;" %>
  </p>
</div>
